# ProxyWoman çŠ¶æ€æ åŠŸèƒ½å®ç°æœ€ç»ˆå®ŒæˆæŠ¥å‘Š

## ğŸ¯ å®Œæˆçš„çŠ¶æ€æ æ”¹è¿›

### âœ… åŠŸèƒ½ç›®æ ‡
**æ”¹è¿›å‰**: åº•éƒ¨æ˜¾ç¤ºè¿‡æ»¤æ¡†ï¼ŒåŠŸèƒ½å•ä¸€ï¼Œä¿¡æ¯æœ‰é™
**æ”¹è¿›å**: ä¸“ä¸šçš„çŠ¶æ€æ æ˜¾ç¤ºä»£ç†è¯¦ç»†çŠ¶æ€å’Œä¸°å¯Œçš„ç»Ÿè®¡ä¿¡æ¯

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ“Š **ä»£ç†çŠ¶æ€ç›‘æ§**
- **å®æ—¶çŠ¶æ€æ˜¾ç¤º** - ä»£ç†è¿è¡Œä¸­/å·²åœæ­¢/é”™è¯¯çŠ¶æ€
- **çŠ¶æ€æŒ‡ç¤ºå™¨** - ç»¿è‰²åœ†ç‚¹(è¿è¡Œä¸­)ã€çº¢è‰²åœ†ç‚¹(é”™è¯¯)ã€ç°è‰²åœ†ç‚¹(åœæ­¢)
- **ä»£ç†åœ°å€ä¿¡æ¯** - æ˜¾ç¤ºä»£ç†ç›‘å¬åœ°å€å’Œç«¯å£(127.0.0.1:8080)
- **æ•è·çŠ¶æ€** - å®æ—¶æ˜¾ç¤ºæµé‡æ•è·è¿›è¡Œä¸­/å·²åœæ­¢

### ğŸ“ˆ **è¯·æ±‚ç»Ÿè®¡ä¿¡æ¯**
- **æ€»è¯·æ±‚æ•°** - æ˜¾ç¤ºæ•è·çš„æ€»è¯·æ±‚æ•°é‡
- **å·²è¿‡æ»¤æ•°** - æ˜¾ç¤ºå½“å‰è¿‡æ»¤æ¡ä»¶ä¸‹çš„è¯·æ±‚æ•°é‡
- **æˆåŠŸè¯·æ±‚** - æ˜¾ç¤ºçŠ¶æ€ç 2xx-3xxçš„æˆåŠŸè¯·æ±‚(ç»¿è‰²æ˜¾ç¤º)
- **é”™è¯¯è¯·æ±‚** - æ˜¾ç¤ºçŠ¶æ€ç 4xx-5xxçš„é”™è¯¯è¯·æ±‚(çº¢è‰²æ˜¾ç¤º)

### âš¡ **æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯**
- **æ€»æ•°æ®å¤§å°** - æ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ€»å¤§å°(è‡ªåŠ¨å•ä½è½¬æ¢)
- **å¹³å‡å“åº”æ—¶é—´** - è®¡ç®—æ‰€æœ‰è¯·æ±‚çš„å¹³å‡å“åº”æ—¶é—´
- **è¯·æ±‚é€Ÿç‡** - å®æ—¶æ˜¾ç¤ºæ¯ç§’è¯·æ±‚æ•°(RPS)

## ğŸ¨ ç•Œé¢è®¾è®¡ç‰¹è‰²

### 1. **ä¸“ä¸šçŠ¶æ€æ å¸ƒå±€**
```
[ğŸŸ¢ ä»£ç†è¿è¡Œä¸­] [åœ°å€: 127.0.0.1:8080] [æ•è·: è¿›è¡Œä¸­] | [æ€»è¯·æ±‚: 1,234] [å·²è¿‡æ»¤: 567] [æˆåŠŸ: 1,100] [é”™è¯¯: 134] | [æ€»å¤§å°: 15.2 MB] [å¹³å‡å“åº”: 245ms] [è¯·æ±‚/ç§’: 12.5]
```

### 2. **è§†è§‰è®¾è®¡å…ƒç´ **
- **çŠ¶æ€æŒ‡ç¤ºå™¨**: 8pxåœ†å½¢æŒ‡ç¤ºå™¨ï¼Œå¸¦å‘å…‰æ•ˆæœ
- **åˆ†ç»„å¸ƒå±€**: ä¸‰ä¸ªåŠŸèƒ½åŒºåŸŸï¼Œç”¨åˆ†éš”çº¿æ¸…æ™°åˆ’åˆ†
- **é¢œè‰²ç¼–ç **: 
  - ğŸŸ¢ ç»¿è‰²: è¿è¡ŒçŠ¶æ€ã€æˆåŠŸè¯·æ±‚
  - ğŸ”´ çº¢è‰²: é”™è¯¯çŠ¶æ€ã€å¤±è´¥è¯·æ±‚
  - ğŸ”µ è“è‰²: æ•è·è¿›è¡Œä¸­
  - âšª ç°è‰²: åœæ­¢çŠ¶æ€ã€æ ‡ç­¾æ–‡å­—

### 3. **å“åº”å¼æ›´æ–°**
- **çŠ¶æ€æ›´æ–°**: æ¯5ç§’è‡ªåŠ¨æ›´æ–°ä»£ç†çŠ¶æ€
- **æ€§èƒ½ç»Ÿè®¡**: æ¯ç§’æ›´æ–°è¯·æ±‚é€Ÿç‡
- **å®æ—¶æ•°æ®**: æµé‡æ•°æ®å˜åŒ–æ—¶ç«‹å³æ›´æ–°ç»Ÿè®¡

## ğŸ”§ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. **StatusBar.svelteç»„ä»¶æ¶æ„**
```typescript
// æ ¸å¿ƒçŠ¶æ€ç®¡ç†
let proxyStatus = 'stopped';
let proxyPort = 8080;
let proxyAddress = '127.0.0.1';
let isCapturing = false;

// ç»Ÿè®¡ä¿¡æ¯
let totalRequests = 0;
let filteredRequests = 0;
let successRequests = 0;
let errorRequests = 0;
let totalSize = 0;
let averageResponseTime = 0;
let requestsPerSecond = 0;
```

### 2. **æ™ºèƒ½æ•°æ®è®¡ç®—**
```typescript
// æˆåŠŸå’Œé”™è¯¯è¯·æ±‚ç»Ÿè®¡
successRequests = flowList.filter(flow => 
  flow.statusCode && flow.statusCode >= 200 && flow.statusCode < 400
).length;

errorRequests = flowList.filter(flow => 
  flow.statusCode && flow.statusCode >= 400
).length;

// æ€»å¤§å°è®¡ç®—
totalSize = flowList.reduce((sum, flow) => {
  const responseSize = flow.response?.body ? flow.response.body.length : 0;
  const requestSize = flow.request?.body ? flow.request.body.length : 0;
  return sum + responseSize + requestSize;
}, 0);

// å¹³å‡å“åº”æ—¶é—´
const responseTimes = flowList
  .filter(flow => flow.duration && flow.duration > 0)
  .map(flow => flow.duration || 0);
averageResponseTime = responseTimes.reduce((sum, time) => sum + time, 0) / responseTimes.length;
```

### 3. **æ ¼å¼åŒ–å·¥å…·å‡½æ•°**
```typescript
// æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
function formatSize(bytes: number): string {
  if (bytes === 0) return '0 B';
  const k = 1024;
  const sizes = ['B', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

// æ—¶é—´æ ¼å¼åŒ–
function formatTime(ms: number): string {
  if (ms < 1000) return `${Math.round(ms)}ms`;
  return `${(ms / 1000).toFixed(1)}s`;
}
```

### 4. **ProxyServiceæ‰©å±•**
```typescript
// æ–°å¢ä»£ç†çŠ¶æ€è¯¦æƒ…API
public async getProxyStatus(): Promise<{
  isRunning: boolean;
  isCapturing: boolean;
  port: number;
  address: string;
}> {
  try {
    const isRunning = await IsProxyRunning();
    const port = await GetProxyPort();
    
    return {
      isRunning,
      isCapturing: isRunning,
      port: port || 8080,
      address: '127.0.0.1'
    };
  } catch (error) {
    return {
      isRunning: false,
      isCapturing: false,
      port: 8080,
      address: '127.0.0.1'
    };
  }
}
```

## ğŸ“Š çŠ¶æ€æ ä¿¡æ¯å±•ç¤º

### 1. **ä»£ç†çŠ¶æ€åŒºåŸŸ**
| çŠ¶æ€ | æŒ‡ç¤ºå™¨ | æ˜¾ç¤ºæ–‡å­— | è¯´æ˜ |
|------|--------|----------|------|
| è¿è¡Œä¸­ | ğŸŸ¢ | ä»£ç†è¿è¡Œä¸­ | ä»£ç†æœåŠ¡æ­£å¸¸è¿è¡Œ |
| å·²åœæ­¢ | âšª | ä»£ç†å·²åœæ­¢ | ä»£ç†æœåŠ¡æœªå¯åŠ¨ |
| é”™è¯¯ | ğŸ”´ | ä»£ç†é”™è¯¯ | ä»£ç†æœåŠ¡å¼‚å¸¸ |

### 2. **ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ**
| é¡¹ç›® | æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|------|
| æ€»è¯·æ±‚ | æ•°å­—(åƒåˆ†ä½) | 1,234 | æ‰€æœ‰æ•è·çš„è¯·æ±‚ |
| å·²è¿‡æ»¤ | æ•°å­—(åƒåˆ†ä½) | 567 | å½“å‰è¿‡æ»¤ç»“æœ |
| æˆåŠŸ | æ•°å­—(ç»¿è‰²) | 1,100 | 2xx-3xxçŠ¶æ€ç  |
| é”™è¯¯ | æ•°å­—(çº¢è‰²) | 134 | 4xx-5xxçŠ¶æ€ç  |

### 3. **æ€§èƒ½ä¿¡æ¯åŒºåŸŸ**
| é¡¹ç›® | æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|------|
| æ€»å¤§å° | è‡ªåŠ¨å•ä½ | 15.2 MB | è¯·æ±‚+å“åº”æ€»å¤§å° |
| å¹³å‡å“åº” | æ—¶é—´æ ¼å¼ | 245ms | æ‰€æœ‰è¯·æ±‚å¹³å‡å“åº”æ—¶é—´ |
| è¯·æ±‚/ç§’ | å°æ•°ç‚¹1ä½ | 12.5 | å®æ—¶è¯·æ±‚é€Ÿç‡ |

## ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡

### 1. **ä¿¡æ¯ä¸°å¯Œåº¦**
- **ä»å•ä¸€è¿‡æ»¤** â†’ **å…¨é¢çŠ¶æ€ç›‘æ§**
- **é™æ€æ˜¾ç¤º** â†’ **å®æ—¶åŠ¨æ€æ›´æ–°**
- **åŸºç¡€åŠŸèƒ½** â†’ **ä¸“ä¸šçº§ç›‘æ§é¢æ¿**

### 2. **æ“ä½œä¾¿åˆ©æ€§**
- **ä¸€ç›®äº†ç„¶**: æ‰€æœ‰å…³é”®ä¿¡æ¯é›†ä¸­æ˜¾ç¤º
- **çŠ¶æ€æ˜ç¡®**: æ¸…æ™°çš„è§†è§‰çŠ¶æ€æŒ‡ç¤º
- **æ•°æ®å‡†ç¡®**: å®æ—¶è®¡ç®—çš„ç²¾ç¡®ç»Ÿè®¡

### 3. **ä¸“ä¸šæ„Ÿæå‡**
- **ä¼ä¸šçº§ç•Œé¢**: ä¸“ä¸šçš„çŠ¶æ€æ è®¾è®¡
- **æ•°æ®å¯è§†åŒ–**: ä¸°å¯Œçš„ç»Ÿè®¡ä¿¡æ¯å±•ç¤º
- **å®æ—¶ç›‘æ§**: åŠ¨æ€çš„æ€§èƒ½æŒ‡æ ‡

## ğŸ“ˆ æ„å»ºæˆåŠŸæŒ‡æ ‡

- âœ… **å‰ç«¯æ„å»º**: æˆåŠŸï¼ŒçŠ¶æ€æ ç»„ä»¶å®Œæ•´é›†æˆ
- âœ… **Wailsæ„å»º**: æˆåŠŸï¼Œç”Ÿæˆå®Œæ•´macOSåº”ç”¨(9.3ç§’)
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: ä»£ç†çŠ¶æ€ã€æ•è·çŠ¶æ€å®æ—¶æ˜¾ç¤º
- ğŸ“ˆ **ç»Ÿè®¡ä¿¡æ¯**: è¯·æ±‚æ•°é‡ã€æˆåŠŸç‡ã€é”™è¯¯ç‡ç»Ÿè®¡
- âš¡ **æ€§èƒ½æŒ‡æ ‡**: æ•°æ®å¤§å°ã€å“åº”æ—¶é—´ã€è¯·æ±‚é€Ÿç‡

## ğŸ”„ å®æ—¶æ›´æ–°æœºåˆ¶

### 1. **æ•°æ®è®¢é˜…**
```typescript
// è®¢é˜…æµé‡æ•°æ®å˜åŒ–
const unsubscribeFlows = flows.subscribe(flowList => {
  // ç«‹å³æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
  totalRequests = flowList.length;
  successRequests = flowList.filter(/* æˆåŠŸæ¡ä»¶ */).length;
  errorRequests = flowList.filter(/* é”™è¯¯æ¡ä»¶ */).length;
  // ...å…¶ä»–ç»Ÿè®¡è®¡ç®—
});
```

### 2. **å®šæ—¶æ›´æ–°**
```typescript
// ä»£ç†çŠ¶æ€æ›´æ–° (æ¯5ç§’)
statsInterval = setInterval(updateProxyStatus, 5000);

// æ€§èƒ½ç»Ÿè®¡æ›´æ–° (æ¯ç§’)
performanceInterval = setInterval(updatePerformanceStats, 1000);
```

### 3. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**
```typescript
onDestroy(() => {
  unsubscribeFlows();
  unsubscribeFilteredFlows();
  clearInterval(statsInterval);
  clearInterval(performanceInterval);
});
```

## ğŸ‰ æ€»ç»“

è¿™æ¬¡çŠ¶æ€æ åŠŸèƒ½æ”¹è¿›æ˜¾è‘—æå‡äº†ProxyWomançš„ä¸“ä¸šæ€§å’Œå®ç”¨æ€§ï¼š

### åŠŸèƒ½ä»·å€¼
- **ä¿¡æ¯é›†ä¸­**: å°†å…³é”®çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯é›†ä¸­å±•ç¤º
- **å®æ—¶ç›‘æ§**: æä¾›åŠ¨æ€çš„ä»£ç†çŠ¶æ€å’Œæ€§èƒ½ç›‘æ§
- **æ•°æ®æ´å¯Ÿ**: ä¸°å¯Œçš„ç»Ÿè®¡ä¿¡æ¯å¸®åŠ©ç”¨æˆ·äº†è§£æµé‡æƒ…å†µ

### æŠ€æœ¯ä»·å€¼
- **ç»„ä»¶åŒ–è®¾è®¡**: ç‹¬ç«‹çš„StatusBarç»„ä»¶ï¼Œæ˜“äºç»´æŠ¤
- **å“åº”å¼æ›´æ–°**: é«˜æ•ˆçš„æ•°æ®è®¢é˜…å’Œæ›´æ–°æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**: åˆç†çš„æ›´æ–°é¢‘ç‡ï¼Œé¿å…è¿‡åº¦è®¡ç®—

### ç”¨æˆ·ä»·å€¼
- **ä¸“ä¸šä½“éªŒ**: ä¼ä¸šçº§ç½‘ç»œè°ƒè¯•å·¥å…·çš„ä¸“ä¸šç•Œé¢
- **æ“ä½œæ•ˆç‡**: å…³é”®ä¿¡æ¯ä¸€ç›®äº†ç„¶ï¼Œæå‡å·¥ä½œæ•ˆç‡
- **çŠ¶æ€é€æ˜**: æ¸…æ™°çš„ä»£ç†çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯

ProxyWomanç°åœ¨æ‹¥æœ‰äº†åŠŸèƒ½å®Œæ•´ã€ä¿¡æ¯ä¸°å¯Œçš„ä¸“ä¸šçŠ¶æ€æ ï¼Œä¸ºç”¨æˆ·æä¾›äº†å…¨é¢çš„ä»£ç†ç›‘æ§å’Œç»Ÿè®¡åˆ†æèƒ½åŠ›ï¼ğŸ¯
